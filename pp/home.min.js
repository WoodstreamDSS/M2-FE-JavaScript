require(["jquery"],(function($){let index=0,newIndex,maxIndex=$("#home-app>section").length,direction,animating=!1,fade=500;const reducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches;reducedMotion&&$("#home-app").attr("data-reduce-motion",!0);const videoStateUpdate=state=>{let video=$("#home-app .header-content video")[0];state?video.play():video.pause()};let displayMode;videoStateUpdate(!0);const findMaxPanelSize=()=>{let verticalMargin=.035,horizontalMargin=.02,portraitByWidth=1.7,portraitByHeight=.58,landscapeByWidth=.48,landscapeByHeight=2.16,resizeMode,headerHeight=$(".section-heading").innerHeight(),vpWidth,vpHeight,vpAR=window.innerWidth/(window.innerHeight-headerHeight);const resizePanel=()=>{let newHeight,newWidth,newTop,newLeft;"height"==resizeMode&&(newHeight=window.innerHeight-headerHeight,newHeight-=.035*newHeight*2,newWidth="portrait"==displayMode?.58*newHeight:2.16*newHeight),"width"==resizeMode&&(newWidth=window.innerWidth,newWidth-=.02*newWidth*2,newHeight="portrait"==displayMode?1.7*newWidth:.48*newWidth),newTop=headerHeight+.035*newHeight,newLeft=(window.innerWidth-newWidth)/2;let dim={height:newHeight,width:newWidth,top:newTop,left:newLeft,"font-size":newHeight/100+"px"};$(".panel-resize").css(dim)};"portrait"==displayMode&&(resizeMode=vpAR<.58?"width":"height"),"landscape"==displayMode&&(resizeMode=vpAR>2.16?"height":"width"),resizePanel()},updateDisplayMode=()=>{let height=window.innerHeight,width=window.innerWidth,ar;$("body").css("height",window.innerHeight),displayMode=height/width>.8?"portrait":"landscape",$("#home-app>section, .lc-content, .product-content").removeClass("portrait landscape").addClass(displayMode),findMaxPanelSize()},initializePanels=function(){setTimeout((function(){$(".pp-home-nav").css({display:"block"})}))},updateDisplayModeDebounce=new woodstream.Debounce(updateDisplayMode,200);$(window).on("resize",updateDisplayModeDebounce),updateDisplayMode(),initializePanels();const conditionalElements=(el,start,end,def)=>{let panelState=el.attr("data-mode");null==panelState&&(panelState=def),index>=start&&index<=end?"off"==panelState&&el.fadeIn(500).attr("data-mode","on"):"on"==panelState&&el.fadeOut(500).attr("data-mode","off")},updateSection=()=>{0==index&&$(".home-hero .hero-copy").attr("data-mode","a"),1==index&&$(".home-hero .hero-copy").attr("data-mode","b"),conditionalElements($(".header-content"),0,1),conditionalElements($(".pp-home-nav"),0,1,"on"),conditionalElements($(".page-header"),0,1,"on"),conditionalElements($(".lc-content"),3,5),conditionalElements($(".product-content"),2,2),conditionalElements($(".section-heading"),2,5,"off"),conditionalElements($(".section-heading h2.learning-center"),3,5,"on"),conditionalElements($(".section-heading h2.product-info"),2,2,"on")},scrollPanels=(oldPanel,newPanel,oldPanelDirection)=>{1==newPanel&&(newPanel=0),2==newPanel&&1==oldPanel&&(oldPanel=0),$(`#home-app>section[data-index="${oldPanel}"]`).removeClass("on").addClass("off"),$(`#home-app>section[data-index="${newPanel}"]`).removeClass("off").addClass("on"),$(`#home-app>section[data-index="${oldPanel}"] .animated-object`).attr("data-state",oldPanelDirection),$(`#home-app>section[data-index="${newPanel}"] .animated-object`).attr("data-state","on"),animating=!1},scroll=direction=>{let footer=!1,oldPanelDirection;if(direction>0)7==newIndex&&6==index&&($("#home-app .flock").addClass("footer"),footer=!0),newIndex>1&&videoStateUpdate(!1),oldPanelDirection="up";else{if(6==newIndex&&7==index&&($("#home-app .flock").removeClass("footer"),footer=!0),newIndex<=1){let accessibilitySwitch;"true"==$("#video-control").attr("aria-checked")&&videoStateUpdate(!0)}oldPanelDirection="down"}footer||scrollPanels(index,newIndex,oldPanelDirection),index=newIndex,updateLearningCenterIndicator(),updateSection(),updateTabIndex(),updateScrollBar()};let scrollBarPosition=0,maxY,range,scrollDrag=!1,bar=document.getElementById("pp-scroll-bar");const updateScrollBar=()=>{if(!scrollDrag){let scrollBarHeight,position=$("#pp-scroll-bar").innerHeight()/(maxIndex+1)*index;$("#scroll-indicator").css({top:position}),scrollBarPosition=position}},setMaxY=()=>{maxY=$("#pp-scroll-bar").innerHeight()-$("#scroll-indicator").innerHeight(),range=$("#pp-scroll-bar").innerHeight()/(maxIndex+1)};setMaxY(),$(window).on("resize",(function(){setMaxY(),updateScrollBar()}));const scrollBarHandler=obj=>{obj.e.stopPropagation();let newOffset=scrollBarPosition+obj.yMove;if("start"==obj.status&&($("body").on("mouseup",(function(){if(scrollDrag){let mouseEvent=new MouseEvent("mouseup");document.getElementById("pp-scroll-bar").dispatchEvent(mouseEvent)}})),setMaxY(),$("#scroll-indicator").css("transition","none"),scrollDrag=!0),"move"==obj.status){newOffset<0&&(newOffset=0),newOffset>maxY&&(newOffset=maxY),$("#scroll-indicator").css({top:newOffset});let targetIndex=Math.round(newOffset/range);if(targetIndex!=index){let scrollDirection=targetIndex<index?-1:1;animating||scrollLogic(scrollDirection)}}"end"==obj.status&&($("#scroll-indicator").css("transition","top 0.25s ease-in-out"),scrollBarPosition=newOffset,scrollDrag=!1,updateScrollBar())},scrollBarTouch=new woodstream.TouchObj("pp-scroll-bar",scrollBarHandler),scrollHandler=()=>{animating=!0,scroll(direction)},scrollDebounce=woodstream.Debounce(scrollHandler,250,!0),checkLoad=()=>{let loadIndex=newIndex;loadIndex++;let section=$(`#home-app>section[data-index="${loadIndex}"]`),state;if("false"==section.attr("data-loaded")){let images;section.attr("data-loaded","true"),section.find("img.lazy-load").each((function(){let newSource=$(this).attr("data-src");$(this).attr("src",newSource)}))}},scrollLogic=increment=>{let scrolling=!0;newIndex=index,newIndex+=increment,checkLoad(),newIndex<0&&0==index&&(newIndex=0,scrolling=!1),newIndex<0&&0!=index&&(newIndex=0,scrolling=!0),newIndex>maxIndex&&index==maxIndex&&(newIndex=maxIndex,scrolling=!1),newIndex>maxIndex&&index!=maxIndex&&(newIndex=maxIndex,scrolling=!0),scrolling&&!animating&&(direction=increment,scrollDebounce())};$(document).on("keyup",e=>{"ArrowUp"==e.key&&scrollLogic(-1),"ArrowDown"==e.key&&scrollLogic(1)}),document.addEventListener("wheel",(function(e){if(!animating){let indexIncrement=0;indexIncrement=e.deltaY>0?1:-1,scrollLogic(indexIncrement)}}));const animationComplete=()=>{animating=!1},debounceAnimationComplete=new woodstream.Debounce(animationComplete,100);$("#home-app>section .animated-object").bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",debounceAnimationComplete);const updateLearningCenterIndicator=()=>{let panelCount=3,startPanel=3,percentage=100/3*(index-2);"landscape"==displayMode?$("#lc-indicator .percentage").css({height:`${percentage}%`,width:"100%"}):$("#lc-indicator .percentage").css({width:`${percentage}%`,height:"100%"}),0==index?$("#lc-indicator").fadeOut(500):$("#lc-indicator").fadeIn(500)};updateLearningCenterIndicator(),updateLearningCenterIndicatorDebounce=new woodstream.Debounce(updateLearningCenterIndicator,100),$(window).on("resize",updateLearningCenterIndicatorDebounce);const updateTabIndex=()=>{let footerLinks=$('.pp-links a, .footer-store-switcher, .enews-subtitle a, .pp-enews input[type="email"], .pp-enews input[type="submit"], .pp-social a');footerLinks.attr("tabindex",-1),$("#home-app>section a, #home-app>section button").attr("tabindex",-1),0==index&&$(".home-hero a").attr("tabindex",0),2==index&&$(".prod-info a, .prod-info button").attr("tabindex",0),3==index&&$(".lc-hb101 a").attr("tabindex",0),4==index&&$(".lc-wb101 a").attr("tabindex",0),5==index&&$(".lc-s101 a").attr("tabindex",0),6==index&&$(".flock>.content a").attr("tabindex",0),7==index&&($(".flock a").attr("tabindex",0),footerLinks.attr("tabindex",0))};updateTabIndex(),woodstream.ParallaxObject=class{constructor(id,panel,maxMovement,weight){this.id=id,this.el=$(`#${id}`),this.panel=panel,this.weight=weight,this.maxMovement=maxMovement}move(obj){let xMove,yMove;window.innerWidth>479?(xMove=-1*parseInt(obj.nX*this.maxMovement*this.weight),yMove=-1*parseInt(obj.nY*this.maxMovement*this.weight)):(xMove=0,yMove=0),reducedMotion||$(this.el).css({transform:`translate(${xMove}px, ${yMove}px)`})}};let parallaxPanels=[];$("#home-app>section").each((function(i){let pObjects=$(this).find(".parallax-object"),panelObjects=[];pObjects.each((function(j){let id=`id-${i}-${j}`;$(this).attr("id",id);let weight=parseFloat($(this).attr("data-weight"));panelObjects.push(new woodstream.ParallaxObject(id,i,20,weight))})),parallaxPanels.push(panelObjects)}));const parallaxHandler=(pageX,pageY)=>{let data={},xCenter=parseInt(window.innerWidth/2),yCenter=parseInt(window.innerHeight/2);data.deltaX=pageX-xCenter,data.deltaY=pageY-yCenter;let maxFromCenter=Math.sqrt(xCenter*xCenter+yCenter*yCenter);data.dist=parseInt(Math.sqrt(data.deltaX*data.deltaX+data.deltaY*data.deltaY)),data.nDist=data.dist/maxFromCenter,data.nX=data.deltaX/xCenter,data.nY=data.deltaY/yCenter;try{parallaxPanels[index].length>0&&parallaxPanels[index].forEach((function(obj){obj.move(data)}))}catch{}},parallaxHandlerDebounce=(x,y)=>{woodstream.Debounce(parallaxHandler(x,y),200)};document.onmousemove=e=>{parallaxHandlerDebounce(e.pageX,e.pageY)};const bodyScrollHandler=obj=>{if("end"==obj.status){let increment=0;obj.yMove>=25&&(increment=-1),obj.yMove<=-25&&(increment=1),0!=increment&&scrollLogic(increment)}};let docScroll=new woodstream.TouchObj("home-app",bodyScrollHandler);$("#video-control").on("click",(function(){let state,newState="true"!=$(this).attr("aria-checked");$(this).attr({"aria-checked":newState}),videoStateUpdate(newState)}));let prodInfoSelect=-1;const updateInfoPanel=newIndex=>{$(".prod-info .indicator button").attr({"aria-selected":!1}),newIndex==prodInfoSelect?prodInfoSelect=-1:(prodInfoSelect=newIndex,$(".prod-info .indicator button").eq(newIndex).attr({"aria-selected":!0})),$(".prod-info *[data-index]").attr("aria-hidden",!0),$(`.prod-info *[data-index="${prodInfoSelect}"]`).attr("aria-hidden",!1),-1!=prodInfoSelect?$(".prod-info .indicator").addClass("mobile-selected"):$(".prod-info .indicator").removeClass("mobile-selected")};$(".prod-info .indicator button").on("click",(function(){let newIndex=$(this).index();updateInfoPanel(newIndex)}));let megamenuMode=window.innerWidth<768?"mobile":"desktop";const toggleMobileNav=state=>{let newState;newState=state||"true"!=(state=$(".pp-home-nav").attr("aria-hidden")),$(".pp-home-nav, .mobile-nav-screen").attr("aria-hidden",newState)};$(window).on("resize",()=>{"mobile"==megamenuMode&&toggleMobileNav("true"),megamenuMode=window.innerWidth<768?"mobile":"desktop",$(".pp-home-nav").attr("data-nav-mode",megamenuMode)}),$(".mobile-menu-toggle, .mobile-nav-screen").on("click",e=>{toggleMobileNav()}),"mobile"==megamenuMode&&toggleMobileNav(),$(".nav-item-wrap > li").on("mouseover",e=>{window.innerWidth>767&&openMegamenu(e)}),$(".nav-item-wrap > li").on("mouseout",e=>{window.innerWidth>767&&closeMegamenu(e)}),$(".nav-item-wrap > li").on("focusin",e=>{window.innerWidth>767&&openMegamenu(e)}),$(".nav-item-wrap > li").on("focusout",e=>{if(window.innerWidth>767){let contains;$(e.currentTarget).find($(e.relatedTarget)).length>0||closeMegamenu(e)}});const openMegamenu=e=>{let el=e.currentTarget,links;"A"==el.tagName&&(el=el.parentElement),$(el).find(".pp-megamenu-container").attr("aria-hidden",!1),$(el).find(".pp-megamenu a").attr("tabindex",0)},closeMegamenu=e=>{let el=e.currentTarget,links;"A"==el.tagName&&(el=el.parentElement),$(el).find(".pp-megamenu-container").attr("aria-hidden",!0),$(el).find(".pp-megamenu a").attr("tabindex",-1)};$(".pp-home-nav .nav-item-l1:not(.mobile-active)>a").on("click",(function(e){if("mobile"==megamenuMode){e.preventDefault();let state,newState="true"!=$(e.currentTarget).parent("li").attr("data-mobile-open");$(e.currentTarget).parent("li").attr("data-mobile-open",newState)}}));let mobileYPos=0,mobileNav=$("#mobile-nav"),mobileNavContent=$("#mobile-nav .content"),minY=0;$(window).on("resize",()=>{mobileYPos=0;let mode,newTop="desktop"==$("#mobile-nav").attr("data-nav-mode")?"33%":0;mobileNav.css({top:newTop})});const recalculateMinY=()=>{let viewportHeight=mobileNav[0].getBoundingClientRect().height,navHeight=mobileNavContent[0].getBoundingClientRect().height;newMinY=viewportHeight-navHeight,newMinY>0&&(newMinY=0),minY=newMinY,mobileYPos<minY&&(mobileNav.css("top",minY),mobileYPos=minY)};recalculateMinY();const mobileTouchHandler=obj=>{if(window.innerWidth<768){obj.e.stopPropagation();let newIndex=mobileYPos+obj.yMove;"start"==obj.status&&recalculateMinY(),"move"==obj.status&&(newIndex>0&&(newIndex=0),newIndex<minY&&(newIndex=minY),mobileNav.css({top:newIndex})),"end"==obj.status&&(newIndex<=0?mobileYPos+=newIndex:mobileYPos=0)}};let mobileNavTouch=new woodstream.TouchObj("mobile-nav",mobileTouchHandler);const updateMobileMenu=target=>{if(console.log(target),woodstream.megamenuMobileMode){let group=target.next(".link-group"),state="true"==group.attr("aria-hidden");group.attr("aria-hidden",!state)}};$(".menu-column h3.heading button.mobileArrow").on("click",(function(){let target=$(this).parent("h3");updateMobileMenu(target)}))}));